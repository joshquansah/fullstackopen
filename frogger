#include <stdio.h>
#include <time.h>
int FrogFate(int currentSquare, int prevSquare, int prevPrev, int mAgicNumber, int nSquares, int board[]){
    if(board[currentSquare] == mAgicNumber){
        return 1;
    }
    else if(currentSquare <= 0){
        return 2;
    }
    else if (currentSquare > nSquares){
        return 3;
    }
    else if((board[currentSquare] +  board[prevSquare] == 0) && currentSquare == prevPrev){
        return 4;
    }
    else{
        return 0;
    }
}
void FrogMovement(int* currentSquare, int board[], int nSquares){
    *currentSquare = *currentSquare + board[*currentSquare];
}

int main(){
    int nSquares, currentSquare, sTartingSquare, mAgicNumber;
    
    if(scanf("%d %d %d", &nSquares, &sTartingSquare, &mAgicNumber) == 3 && (nSquares >= 1 && nSquares<= 200) && (sTartingSquare >= 1 && sTartingSquare <= nSquares)){
    }
    else{
        printf("Bad inputs");
    }
    
    int board[nSquares + 1];
    board[0] = 0;
    for(int i = 1; i <= nSquares; ++i){
        scanf("%d", &(board[i]));
    }

    int hops = 0;
    int prevSquare = 0;
    int prevPrev = 0;
    
    int gameState = FrogFate(sTartingSquare, prevSquare, prevPrev, mAgicNumber, nSquares, board);
   currentSquare = sTartingSquare;
   
    while(gameState == 0){
        prevPrev = prevSquare;
        prevSquare = currentSquare;
        FrogMovement(&currentSquare, board, nSquares);
        gameState = FrogFate(currentSquare, prevSquare, prevPrev, mAgicNumber, nSquares, board);
        hops = hops + 1;
    }
    
    switch(gameState){
        case 1:
        printf("magic");
        break;
        case 2:
        printf("left");
        break;
        case 3:
        printf("right");
        break;
        case 4:
        printf("cycle");
        break;
    }
    printf("\n%d\n", hops);
    
}
